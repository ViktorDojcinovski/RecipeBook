<!--
  Generated template for the EntryPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title> Recipe Entry </ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
	<form novalidate [formGroup]="recipe" (ngSubmit)="logForm()">
      <ion-item>
        <ion-label>Recipe Name</ion-label>
        <ion-input type="text" formControlName="title"></ion-input>
      </ion-item>
      	<ion-item *ngIf="!recipe.controls.title.valid && (recipe.controls.title.dirty || submitAttempt)">
	      	<ion-card>
				<ion-card-content>
					<small>
						Please enter a valid name.
					</small>
				</ion-card-content>
			</ion-card>
    	</ion-item>

      <ion-item>
        <ion-label>Recipe Source</ion-label>
        <ion-input type="text" formControlName="source"></ion-input>
      </ion-item>

      <ion-item>
        <ion-list>
        	<ion-badge item-end *ngFor="let item of ingredients; let i = index">
        		{{ item.title }} {{ item.quantity }} 
        		<ion-icon name="close" (click)="removeIngredient(i)"></ion-icon>
        	</ion-badge>
		</ion-list>
      </ion-item>

      <ion-item  id="ingredients-input-wrapper">
	    <ion-label>Ingredient</ion-label>
	    <ion-select formControlName="ingredientTtl">
	      <ion-option value="flour">Flour</ion-option>
	      <ion-option value="milk">Milk</ion-option>
	      <ion-option value="oil">Oil</ion-option>
	      <ion-option value="salt">Salt</ion-option>
	      <ion-option value="sugar">Sugar</ion-option>
	      <ion-option value="eggs">Eggs</ion-option>
	      <ion-option value="tomatoes">Tomatoes</ion-option>
	      <ion-option value="peppers">Peppers</ion-option>
	      <ion-option value="cheese">Cheese</ion-option>
	      <ion-option value="potatoes">Potatoes</ion-option>
	      <ion-option value="meat">Meat</ion-option>
	    </ion-select>
	  </ion-item>

	  <ion-item id="quantity-input-wrapper">
        <ion-label>Quantity</ion-label>
        <ion-input type="text" formControlName="ingredientQnt"></ion-input>
      </ion-item>

      <button type="button" ion-button id="ingredient-save-btn" (click)="saveIngredient()" [disabled]="(recipe.controls.ingredientQnt.pristine || recipe.controls.ingredientTtl.pristine)">
      	Save Ingredient
      </button>

      	<ion-item *ngIf="submitAttempt && ingredients.length < 1">
	      	<ion-card>
				<ion-card-content>
					<small>
						Please fill in at least one ingredient.
					</small>
				</ion-card-content>
			</ion-card>
		</ion-item>

      <ion-item>
      		<p>Preparation Time</p>
      </ion-item>

      <ion-item id="hours-input-wrapper">
        <ion-label>Hours</ion-label>
        <ion-input type="number" formControlName="prepTimeH"></ion-input>
      </ion-item>

      	<ion-item *ngIf="!recipe.controls.prepTimeH.valid && (recipe.controls.prepTimeH.dirty || submitAttempt)">
	      	<ion-card>
				<ion-card-content>
					<small>
						Please enter value between 0 and 10.
					</small>
				</ion-card-content>
			</ion-card>
		</ion-item>

      <ion-item id="minutes-input-wrapper">
        <ion-label>Minutes</ion-label>
        <ion-input type="number" formControlName="prepTimeM"></ion-input>
      </ion-item>

      	<ion-item *ngIf="!recipe.controls.prepTimeM.valid && (recipe.controls.prepTimeM.dirty || submitAttempt)">
	      	<ion-card>
				<ion-card-content>
					<small>
						Please enter value between 0 and 59.
					</small>
				</ion-card-content>
			</ion-card>
		</ion-item>

      <ion-item>
        <ion-label>Instructions</ion-label>
        <ion-textarea formControlName="instructions"></ion-textarea>
      </ion-item>

      	<ion-item *ngIf="!recipe.controls.instructions.valid && (recipe.controls.instructions.dirty || submitAttempt)">
	      	<ion-card>
				<ion-card-content>
					<small>
						Please enter a valid instruction (min 40 letters).
					</small>
				</ion-card-content>
			</ion-card>
		</ion-item>
    
	    <button ion-button type="submit">
	      	Save Recipe
	    </button>
    </form>

		<button ion-button (click)="listRecipes()">
			List All Recipes
		</button>
</ion-content>
